{
  "actions": {
    "CreateMesh": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: CreateMesh\n<公共请求参数>\n\n{\n    \"DisplayName\": \"service-mgr\",\n    \"MeshVersion\": \"1.8.1\",\n    \"Type\": \"HOSTED\",\n    \"Config\": {\n        \"Istio\": {\n            \"OutboundTrafficPolicy\": \"ALLOW_ANY\",\n            \"Tracing\": {\n                \"Sampling\": 1\n            }\n        }\n    },\n    \"ClusterList\": [\n        {\n            \"ClusterId\": \"{{clusterId}}\",\n            \"Region\": \"sh\",\n            \"Role\": \"MASTER\",\n            \"VpcId\": \"{{vpcId}}\",\n            \"SubnetId\": \"{{subnetId}}\",\n            \"Config\": {\n                \"AutoInjectionNamespaceList\": [\n                    \"default\"\n                ]\n            }\n        }\n    ]\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\",\n        \"MeshId\": \"mesh-xxxxxxxx\"\n    }\n}",
        "title": "CreateMesh"
      }
    ],
    "DeleteMesh": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: DeleteMesh\n<公共请求参数>\n\n{\n    \"MeshId\": \"mesh-xxxxxxxx\",\n    \"NeedDeleteCLS\": \"false\",\n    \"NeedDeleteTMP\": \"false\",\n    \"NeedDeleteAPM\": \"false\",\n    \"NeedDeleteGrafana\": \"false\"\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "DeleteMesh"
      }
    ],
    "DescribeAccessLogConfig": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: DescribeAccessLogConfig\n<公共请求参数>\n\n{\n    \"MeshId\": \"\\\"mesh-xxxxxxxx\\\"\"\n}",
        "output": "{\n    \"Response\": {\n        \"File\": \"/dev/stdout\",\n        \"Format\": \"{xxx: xxx}\",\n        \"Encoding\": \"JSON\",\n        \"SelectedRange\": {\n            \"Items\": [\n                {\n                    \"Namespace\": \"default\",\n                    \"ClusterName\": \"cls-xxxxxxxx\",\n                    \"Gateways\": [\n                        \"ingressgateway\"\n                    ]\n                }\n            ],\n            \"All\": true\n        },\n        \"Template\": \"istio\",\n        \"CLS\": {\n            \"Enable\": true,\n            \"LogSet\": \"mesh-logset\",\n            \"Topic\": \"mesh-logset-topic\",\n            \"NeedDelete\": true,\n            \"Region\": \"sh\"\n        },\n        \"Address\": \"x.x.x.x\",\n        \"EnableServer\": true,\n        \"EnableStdout\": true,\n        \"Enable\": true,\n        \"RequestId\": \"xxxxxxxxxxxxxxxxxxx\"\n    }\n}",
        "title": "获取Mesh访问日志配置"
      }
    ],
    "DescribeMesh": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: DescribeMesh\n<公共请求参数>\n\n{\n    \"MeshId\": \"mesh-351lvuec\"\n}",
        "output": "{\n    \"Response\": {\n        \"Mesh\": {\n            \"ClusterList\": [\n                {\n                    \"ClusterId\": \"cls-i3wbzkfl\",\n                    \"Config\": {\n                        \"AutoInjectionNamespaceList\": [],\n                        \"AutoInjectionNamespaceStateList\": [],\n                        \"DeployConfig\": {\n                            \"NodeSelectType\": \"\",\n                            \"Nodes\": []\n                        },\n                        \"EgressGatewayList\": [],\n                        \"IngressGatewayList\": [],\n                        \"Istiod\": null\n                    },\n                    \"DisplayName\": \"cluster-1\",\n                    \"HostedNamespaces\": [],\n                    \"LinkedTime\": \"2025-01-02T20:18:13+08:00\",\n                    \"Region\": \"ap-shanghai\",\n                    \"Role\": \"REMOTE\",\n                    \"State\": \"RUNNING\",\n                    \"Status\": {\n                        \"LinkErrorDetail\": \"\",\n                        \"LinkState\": \"LINKED\"\n                    },\n                    \"SubnetId\": \"subnet-c1nuvmu7\",\n                    \"VpcId\": \"vpc-5x1y65ok\",\n                    \"Type\": \"TKE\"\n                }\n            ],\n            \"Config\": {\n                \"AccessLog\": {\n                    \"Address\": \"http://10.10.10.10\",\n                    \"CLS\": {\n                        \"Enable\": true,\n                        \"NeedDelete\": false,\n                        \"LogSet\": \"mesh-351lvuec\",\n                        \"Region\": \"ap-shanghai\",\n                        \"Topic\": \"mesh-351lvuec-accesslog\"\n                    },\n                    \"Enable\": true,\n                    \"EnableServer\": false,\n                    \"EnableStdout\": true,\n                    \"Encoding\": \"JSON\",\n                    \"Format\": \"{\\n\\t\\\"authority\\\": \\\"%REQ(:AUTHORITY)%\\\",\\n\\t\\\"bytes_received\\\": \\\"%BYTES_RECEIVED%\\\",\\n\\t\\\"bytes_sent\\\": \\\"%BYTES_SENT%\\\",\\n\\t\\\"downstream_local_address\\\": \\\"%DOWNSTREAM_LOCAL_ADDRESS%\\\",\\n\\t\\\"downstream_remote_address\\\": \\\"%DOWNSTREAM_REMOTE_ADDRESS%\\\",\\n\\t\\\"duration\\\": \\\"%DURATION%\\\",\\n\\t\\\"istio_policy_status\\\": \\\"%DYNAMIC_METADATA(istio.mixer:status)%\\\",\\n\\t\\\"method\\\": \\\"%REQ(:METHOD)%\\\",\\n\\t\\\"path\\\": \\\"%REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%\\\",\\n\\t\\\"protocol\\\": \\\"%PROTOCOL%\\\",\\n\\t\\\"request_id\\\": \\\"%REQ(X-REQUEST-ID)%\\\",\\n\\t\\\"requested_server_name\\\": \\\"%REQUESTED_SERVER_NAME%\\\",\\n\\t\\\"response_code\\\": \\\"%RESPONSE_CODE%\\\",\\n\\t\\\"response_flags\\\": \\\"%RESPONSE_FLAGS%\\\",\\n\\t\\\"route_name\\\": \\\"%ROUTE_NAME%\\\",\\n\\t\\\"start_time\\\": \\\"%START_TIME%\\\",\\n\\t\\\"upstream_cluster\\\": \\\"%UPSTREAM_CLUSTER%\\\",\\n\\t\\\"upstream_host\\\": \\\"%UPSTREAM_HOST%\\\",\\n\\t\\\"upstream_local_address\\\": \\\"%UPSTREAM_LOCAL_ADDRESS%\\\",\\n\\t\\\"upstream_service_time\\\": \\\"%RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%\\\",\\n\\t\\\"upstream_transport_failure_reason\\\": \\\"%UPSTREAM_TRANSPORT_FAILURE_REASON%\\\",\\n\\t\\\"user_agent\\\": \\\"%REQ(USER-AGENT)%\\\",\\n\\t\\\"x_forwarded_for\\\": \\\"%REQ(X-FORWARDED-FOR)%\\\"\\n}\\n\",\n                    \"SelectedRange\": {\n                        \"All\": true\n                    },\n                    \"Template\": \"istio\"\n                },\n                \"Inject\": {\n                    \"ExcludeIPRanges\": [],\n                    \"HoldApplicationUntilProxyStarts\": false,\n                    \"HoldProxyUntilApplicationEnds\": false\n                },\n                \"Istio\": {\n                    \"DisableHTTPRetry\": false,\n                    \"DisablePolicyChecks\": true,\n                    \"EnablePilotHTTP\": false,\n                    \"OutboundTrafficPolicy\": \"ALLOW_ANY\",\n                    \"SmartDNS\": {\n                        \"IstioMetaDNSAutoAllocate\": true,\n                        \"IstioMetaDNSCapture\": true\n                    },\n                    \"Tracing\": {\n                        \"Sampling\": 0\n                    }\n                },\n                \"Prometheus\": {\n                    \"InstanceId\": \"prom-63ad12yj\",\n                    \"Region\": \"ap-shanghai\",\n                    \"VpcId\": \"vpc-5x1y65ok\",\n                    \"SubnetId\": \"subnet-c1nuvmu7\",\n                    \"CustomProm\": null\n                },\n                \"SidecarResources\": {\n                    \"Limits\": [\n                        {\n                            \"Name\": \"cpu\",\n                            \"Quantity\": \"2\"\n                        },\n                        {\n                            \"Name\": \"memory\",\n                            \"Quantity\": \"1Gi\"\n                        }\n                    ],\n                    \"Requests\": [\n                        {\n                            \"Name\": \"cpu\",\n                            \"Quantity\": \"100m\"\n                        },\n                        {\n                            \"Name\": \"memory\",\n                            \"Quantity\": \"128Mi\"\n                        }\n                    ]\n                },\n                \"Tracing\": {\n                    \"APM\": {\n                        \"Region\": \"ap-shanghai\",\n                        \"InstanceId\": \"apm-KlX5JAaaq\",\n                        \"Enable\": false\n                    },\n                    \"Enable\": false\n                }\n            },\n            \"CreatedTime\": \"2025-01-02T10:50:01+08:00\",\n            \"DisplayName\": \"mesh-for-test\",\n            \"MeshId\": \"mesh-351lvuec\",\n            \"Region\": \"ap-shanghai\",\n            \"State\": \"RUNNING\",\n            \"Status\": {\n                \"ActiveOperationList\": null,\n                \"CanaryVersion\": \"\",\n                \"Prometheus\": null,\n                \"ServiceCount\": 43,\n                \"StateMessage\": \"\",\n                \"TPS\": {\n                    \"DisplayName\": \"mesh-351lvuec-prom-63ad12yj\",\n                    \"Grafana\": {\n                        \"Enabled\": false,\n                        \"InternalURL\": \"\",\n                        \"PublicFailedMessage\": \"\",\n                        \"PublicFailedReason\": \"\",\n                        \"PublicURL\": \"\"\n                    },\n                    \"InstanceId\": \"prom-63ad12yj\",\n                    \"PrometheusId\": \"mesh-351lvuec-prom-63ad12yj\",\n                    \"Region\": \"ap-shanghai\",\n                    \"State\": \"RUNNING\",\n                    \"Type\": \"tmp\",\n                    \"VpcId\": \"vpc-5x1y65ok\"\n                }\n            },\n            \"TagList\": [],\n            \"Type\": \"HOSTED\",\n            \"UpdatedTime\": \"2025-01-02T20:50:08+08:00\",\n            \"Version\": \"1.16.5\"\n        },\n        \"RequestId\": \"ffc3123e-07a1-4488-9bd0-465549d61f25\"\n    }\n}",
        "title": "DescribeMesh"
      }
    ],
    "DescribeMeshList": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: DescribeMeshList\n<公共请求参数>\n\n{\n    \"Limit\": 10,\n    \"Offset\": 0\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\",\n        \"MeshList\": [\n            {\n                \"ClusterList\": [\n                    {\n                        \"ClusterId\": \"cls-i3wbzkfl\",\n                        \"Config\": {\n                            \"AutoInjectionNamespaceList\": [],\n                            \"AutoInjectionNamespaceStateList\": [],\n                            \"DeployConfig\": {\n                                \"NodeSelectType\": \"\",\n                                \"Nodes\": []\n                            },\n                            \"EgressGatewayList\": [],\n                            \"IngressGatewayList\": [],\n                            \"Istiod\": null\n                        },\n                        \"DisplayName\": \"cluster-1\",\n                        \"HostedNamespaces\": [],\n                        \"LinkedTime\": \"2025-01-02T20:18:13+08:00\",\n                        \"Region\": \"ap-shanghai\",\n                        \"Role\": \"REMOTE\",\n                        \"State\": \"RUNNING\",\n                        \"Status\": {\n                            \"LinkErrorDetail\": \"\",\n                            \"LinkState\": \"LINKED\"\n                        },\n                        \"SubnetId\": \"subnet-c1nuvmu7\",\n                        \"VpcId\": \"vpc-5x1y65ok\",\n                        \"Type\": \"TKE\"\n                    }\n                ],\n                \"Config\": {\n                    \"AccessLog\": {\n                        \"Address\": \"http://10.10.10.10\",\n                        \"CLS\": {\n                            \"Enable\": true,\n                            \"NeedDelete\": false,\n                            \"LogSet\": \"mesh-351lvuec\",\n                            \"Region\": \"ap-shanghai\",\n                            \"Topic\": \"mesh-351lvuec-accesslog\"\n                        },\n                        \"Enable\": true,\n                        \"EnableServer\": false,\n                        \"EnableStdout\": true,\n                        \"Encoding\": \"JSON\",\n                        \"Format\": \"{\\n\\t\\\"authority\\\": \\\"%REQ(:AUTHORITY)%\\\",\\n\\t\\\"bytes_received\\\": \\\"%BYTES_RECEIVED%\\\",\\n\\t\\\"bytes_sent\\\": \\\"%BYTES_SENT%\\\",\\n\\t\\\"downstream_local_address\\\": \\\"%DOWNSTREAM_LOCAL_ADDRESS%\\\",\\n\\t\\\"downstream_remote_address\\\": \\\"%DOWNSTREAM_REMOTE_ADDRESS%\\\",\\n\\t\\\"duration\\\": \\\"%DURATION%\\\",\\n\\t\\\"istio_policy_status\\\": \\\"%DYNAMIC_METADATA(istio.mixer:status)%\\\",\\n\\t\\\"method\\\": \\\"%REQ(:METHOD)%\\\",\\n\\t\\\"path\\\": \\\"%REQ(X-ENVOY-ORIGINAL-PATH?:PATH)%\\\",\\n\\t\\\"protocol\\\": \\\"%PROTOCOL%\\\",\\n\\t\\\"request_id\\\": \\\"%REQ(X-REQUEST-ID)%\\\",\\n\\t\\\"requested_server_name\\\": \\\"%REQUESTED_SERVER_NAME%\\\",\\n\\t\\\"response_code\\\": \\\"%RESPONSE_CODE%\\\",\\n\\t\\\"response_flags\\\": \\\"%RESPONSE_FLAGS%\\\",\\n\\t\\\"route_name\\\": \\\"%ROUTE_NAME%\\\",\\n\\t\\\"start_time\\\": \\\"%START_TIME%\\\",\\n\\t\\\"upstream_cluster\\\": \\\"%UPSTREAM_CLUSTER%\\\",\\n\\t\\\"upstream_host\\\": \\\"%UPSTREAM_HOST%\\\",\\n\\t\\\"upstream_local_address\\\": \\\"%UPSTREAM_LOCAL_ADDRESS%\\\",\\n\\t\\\"upstream_service_time\\\": \\\"%RESP(X-ENVOY-UPSTREAM-SERVICE-TIME)%\\\",\\n\\t\\\"upstream_transport_failure_reason\\\": \\\"%UPSTREAM_TRANSPORT_FAILURE_REASON%\\\",\\n\\t\\\"user_agent\\\": \\\"%REQ(USER-AGENT)%\\\",\\n\\t\\\"x_forwarded_for\\\": \\\"%REQ(X-FORWARDED-FOR)%\\\"\\n}\\n\",\n                        \"SelectedRange\": {\n                            \"All\": true\n                        },\n                        \"Template\": \"istio\"\n                    },\n                    \"Inject\": {\n                        \"ExcludeIPRanges\": [],\n                        \"HoldApplicationUntilProxyStarts\": false,\n                        \"HoldProxyUntilApplicationEnds\": false\n                    },\n                    \"Istio\": {\n                        \"DisableHTTPRetry\": false,\n                        \"DisablePolicyChecks\": true,\n                        \"EnablePilotHTTP\": false,\n                        \"OutboundTrafficPolicy\": \"ALLOW_ANY\",\n                        \"SmartDNS\": {\n                            \"IstioMetaDNSAutoAllocate\": true,\n                            \"IstioMetaDNSCapture\": true\n                        },\n                        \"Tracing\": {\n                            \"Sampling\": 0\n                        }\n                    },\n                    \"Prometheus\": {\n                        \"InstanceId\": \"prom-63ad12yj\",\n                        \"Region\": \"ap-shanghai\",\n                        \"VpcId\": \"vpc-5x1y65ok\",\n                        \"SubnetId\": \"subnet-c1nuvmu7\",\n                        \"CustomProm\": null\n                    },\n                    \"SidecarResources\": {\n                        \"Limits\": [\n                            {\n                                \"Name\": \"cpu\",\n                                \"Quantity\": \"2\"\n                            },\n                            {\n                                \"Name\": \"memory\",\n                                \"Quantity\": \"1Gi\"\n                            }\n                        ],\n                        \"Requests\": [\n                            {\n                                \"Name\": \"cpu\",\n                                \"Quantity\": \"100m\"\n                            },\n                            {\n                                \"Name\": \"memory\",\n                                \"Quantity\": \"128Mi\"\n                            }\n                        ]\n                    },\n                    \"Tracing\": {\n                        \"APM\": {\n                            \"Region\": \"ap-shanghai\",\n                            \"InstanceId\": \"apm-KlX5JAaaq\",\n                            \"Enable\": false\n                        },\n                        \"Enable\": false\n                    }\n                },\n                \"CreatedTime\": \"2025-01-02T10:50:01+08:00\",\n                \"DisplayName\": \"mesh-for-test\",\n                \"MeshId\": \"mesh-351lvuec\",\n                \"Region\": \"ap-shanghai\",\n                \"State\": \"RUNNING\",\n                \"Status\": {\n                    \"ActiveOperationList\": null,\n                    \"CanaryVersion\": \"\",\n                    \"Prometheus\": null,\n                    \"ServiceCount\": 43,\n                    \"StateMessage\": \"\",\n                    \"TPS\": {\n                        \"DisplayName\": \"mesh-351lvuec-prom-63ad12yj\",\n                        \"Grafana\": {\n                            \"Enabled\": false,\n                            \"InternalURL\": \"\",\n                            \"PublicFailedMessage\": \"\",\n                            \"PublicFailedReason\": \"\",\n                            \"PublicURL\": \"\"\n                        },\n                        \"InstanceId\": \"prom-63ad12yj\",\n                        \"PrometheusId\": \"mesh-351lvuec-prom-63ad12yj\",\n                        \"Region\": \"ap-shanghai\",\n                        \"State\": \"RUNNING\",\n                        \"Type\": \"tmp\",\n                        \"VpcId\": \"vpc-5x1y65ok\"\n                    }\n                },\n                \"TagList\": [],\n                \"Type\": \"HOSTED\",\n                \"UpdatedTime\": \"2025-01-02T20:50:08+08:00\",\n                \"Version\": \"1.16.5\"\n            }\n        ],\n        \"Total\": 1\n    }\n}",
        "title": "DescribeMeshList"
      }
    ],
    "LinkClusterList": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: LinkClusterList\n<公共请求参数>\n\n{\n    \"MeshId\": \"mesh-xxxxxxxx\",\n    \"ClusterList\": [\n        {\n            \"ClusterId\": \"{{clusterId}}\",\n            \"DisplayName\": \"\",\n            \"Region\": \"sh\",\n            \"Role\": \"MASTER\",\n            \"VpcId\": \"{{vpcId}}\",\n            \"SubnetId\": \"{{subnetId}}\",\n            \"Config\": {\n                \"AutoInjectionNamespaceList\": [\n                    \"default\"\n                ]\n            }\n        }\n    ]\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "LinkClusterList"
      }
    ],
    "LinkPrometheus": [
      {
        "document": "连接Prometheus实例",
        "input": "https://tcm.tencentcloudapi.com/?Action=LinkPrometheus\n&MeshID=\"mesh-test\"\n&Prometheus.VpcId=test-vpcid\n&Prometheus.SubnetId=test-subnetid\n&Prometheus.Region=sh\n&Prometheus.InstanceId=\"prom-xxxxxxxx\"\n&<公共请求参数>",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "LinkPrometheus"
      }
    ],
    "ModifyAccessLogConfig": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: ModifyAccessLogConfig\n<公共请求参数>\n\n{\n    \"EnableStdout\": \"true\",\n    \"Template\": \"\\\"istio\\\"\",\n    \"MeshId\": \"\\\"mesh-xxx\\\"\"\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459398\"\n    }\n}",
        "title": "修改AccessLog配置"
      }
    ],
    "ModifyMesh": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: ModifyMesh\n<公共请求参数>\n\n{\n    \"MeshId\": \"{{meshId}}\",\n    \"DisplayName\": \"newName\"\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "ModifyMesh"
      }
    ],
    "ModifyTracingConfig": [
      {
        "document": "",
        "input": "https://tcm.tencentcloudapi.com/?Action=ModifyTracingConfig\n&MeshId=\"mesh-xxx\"\n&Enable=true\n&<公共请求参数>",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "修改 Tracing 配置"
      }
    ],
    "UnlinkCluster": [
      {
        "document": "",
        "input": "POST / HTTP/1.1\nHost: tcm.tencentcloudapi.com\nContent-Type: application/json\nX-TC-Action: UnlinkCluster\n<公共请求参数>\n\n{\n    \"MeshId\": \"{{meshId}}\",\n    \"ClusterId\": \"{{clusterId}}\"\n}",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "UnlinkCluster"
      }
    ],
    "UnlinkPrometheus": [
      {
        "document": "解除关联Prometheus实例",
        "input": "https://tcm.tencentcloudapi.com/?Action=UnlinkPrometheus\n&MeshID=\"mesh-test\"\n&<公共请求参数>",
        "output": "{\n    \"Response\": {\n        \"RequestId\": \"eac6b301-a322-493a-8e36-83b295459397\"\n    }\n}",
        "title": "UnlinkPrometheus"
      }
    ]
  },
  "version": "1.0"
}