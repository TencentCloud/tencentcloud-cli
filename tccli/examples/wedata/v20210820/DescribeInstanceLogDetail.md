**Example 1: 成功获取日志详情**

成功获取日志详情

Input: 

```
tccli wedata DescribeInstanceLogDetail --cli-unfold-argument  \
    --ProjectId 1460963739345731584 \
    --TaskId 20230324161041651 \
    --CurRunDate 2023-03-24 16:20:00 \
    --BrokerIp ins-d6e89nmr \
    --OriginFileName 20230324162000-9-all-log-0.20230324162011.log
```

Output: 
```
{
    "Response": {
        "Data": {
            "DataLogInfo": null,
            "LogInfo": "2023-03-24 16:20:13.018 INFO n.AbstractTaskRunner.<init> [main] [line:269]- the customize_settings file exists in /usr/local/taskScheduler_loader/conf/runner_customize.properties<br>2023-03-24 16:20:13.037 WARN me.RealtimeLogParams.initRealtimeLog [main] [line:84]- schedulerInstanceDTO.getInstanceExtAttribute() is null<br>2023-03-24 16:20:13.037 DEBUG n.AbstractTaskRunner.startWork [main] [line:308]- convert xml file /usr/local/taskScheduler_loader/log/tasklog/35/20230324161041651/20230324162000.xml<br>2023-03-24 16:20:13.292 DEBUG n.AbstractTaskRunner.init [main] [line:373]- convert schedulerInstanceDTO SchedulerInstanceDTO{schedulerTaskDto=TaskDTO{taskId='20230324161041651', virtualTaskId='null', virtualFlag=false, taskName='null', workflowId='68ce6df0-7b80-11ed-a3a7-b8cef6c14251', realWorkflowId='null', workflowName='dev_test', folderId='null', folderName='null', createTime='null', status='Y', inCharge='stackxchen', startTime='2023-03-24 00:00:00', endTime='2023-03-24 23:59:59', projectId=1460963739345731584, projectIdent='null', projectName='null', cycleType=MINUTE_CYCLE, cycleStep=5, crontabExpression=null, instanceInitStrategy=T+0, delayTime=0, startupTime=0, retryWait=5, retriable=null, taskAction='', tryLimit=5, runPriority=6, taskType=TaskTypeDTO{typeId=35, typeDesc='Shell', createTime='2022-02-12 11:13:41', sourceServerType='null', targetServerType='null', runJarName='IdexShell.jar', killable=0, typeSort='数据计算', inCharge='admin', brokerParallelism=10, taskParallelism=10, doRedoParallelism=10000, downgradePriorityTries=2, retryWait=5, retryLimit=5, defaultAliveWait=720, pollingSeconds=5, paramList='<parameters><parameter><name>hdpClient</name><value>/usr/hdp/current/hadoop-client</value></parameter><parameter><name>hiveClient</name><value>/usr/hdp/current/hive-client</value></parameter></parameters>', taskTypeExts=null, fileType='null', selectFilePath=null, excludeCommonLib=false, postHooks=null}, brokerIp='any', clusterId='emr-k3s4qsys', minDateTime='2023-03-24 16:15:00', maxDateTime='2023-03-24 16:15:00', selfDepend=parallel, leftCoordinate=null, topCoordinate=null, taskExt=TaskExtDTO{taskId='20230324161041651', properties={bucket=wedata-agent-test3-1257305158, python_type=python2, ftp.file.name=https://wedata-agent-test3-1257305158.cos.ap-beijing.myqcloud.com/datastudio/project/1460963739345731584/stackxchen/dev_test/test_event_minute_20230324161041651_20230324161625186.sh, pre_dependence_config={}, region=ap-beijing, extraInfo={}}, dryRunExtAttributes=null, dryRunParameter=null}, properties='null', notes='null', yarnQueue='null', alarmDTO=null, alarm='null', submit=null, sourceServer='null', targetServer='null', tasks=null, creater='stackxchen', dependencyRel=and, dependencyWorkflow=no, dependencyConfigDTOList=null, eventListenerConfig='null', eventPublisherConfig='null', virtualTaskStatus='null', recycleTips='null', recycleUser='null', newOrUpdate='null', params=null, taskAutoSubmit=null, lastSchedulerCommitTime=2023-03-24 16:16:25, productName=DATA_DEV, ownId=100028448903, executionStartTime=null, executionEndTime=null, userId=100028590605, tenantId=1315051789, normalizedJobStartTime=2023-03-24 16:20:00, recoverFreezeStartTime=null, inChargeId=null, executionTTL=-1, resourceGroup=20221221143954438902}; SchedulerTaskDto [taskStatus=RUNNING, doFlag=false, executionSpace=CYCLIC, taskExecutionEpochMilli=0], schedulerServerDto=null, taskExtDTO=TaskExtDTO{taskId='20230324161041651', properties={bucket=wedata-agent-test3-1257305158, python_type=python2, ftp.file.name=/usr/local/taskScheduler_loader/tdcp/templates/20230324161041651/20230324162000/test_event_minute_20230324161041651_20230324161625186.sh, pre_dependence_config={}, region=ap-beijing, extraInfo={}, data_cluster=emr-k3s4qsys, shellBin_Hadoop=/usr/local/cluster-shim/v3/bin/hadoop, shellConfig_Hadoop=/usr/local/cluster-shim/v3/conf/emr-k3s4qsys, shellBase_Hadoop=/usr/local/cluster-shim/v3/, shellAuth_Hadoop=ldap, shellVersion_Hadoop=3.2.1, shellBin_Yarn=/usr/local/cluster-shim/v3/bin/yarn, shellConfig_Yarn=/usr/local/cluster-shim/v3/conf/emr-k3s4qsys, shellBase_Yarn=/usr/local/cluster-shim/v3/, shellAuth_Yarn=ldap, shellVersion_Yarn=3.2.1, yarn_api_addr=http://172.16.0.7:5004, RunnerLoaderKey=ins-d6e89nmr, RunnerLoaderPort=9066, yarn_queue_name=root.default, login_hive_password=}, dryRunExtAttributes=null, dryRunParameter=null}, schedulerParameterDTO=SchedulerParameterDTO{listProjectParameterInfo=[ParameterInfo [paramId=null, paramKey=heidy, paramDefine=123, paramValue=123]], listWorkflowParameterInfo=[], listTaskParameterInfo=[], listUpstreamParameterInfo=[], listDownstreamParameterInfo=[], listDryRunParameterInfo=[]}, lastDependencyInstanceTaskDataTimeMap={}, issueId='2023-03-24 16:20:08', loaderToken=com.tencent.tbds.taskscheduler.loader.center.common.utils.TemporaryToken@1440c311, runnerToken=null, nodeDispatchStrategy=RESOURCE, nodeBlacklist=null, instanceDTO=InstanceDTO{taskId='20230324161041651', taskName='null', workflowId='null', workflowName='null', inCharge='stackxchen', cycleType=MINUTE_CYCLE, curRunDate='2023-03-24 16:20:00', nextCurDate='2023-03-24 16:25:00', runPriority=6, tryLimit=5, tries=0, doFlag=0, redoFlag=0, state=LAUNCHED, runtimeBroker='ins-d6e89nmr', errorDesc='Launched succeed, waiting to be issued', taskType=TaskTypeDTO{typeId=35, typeDesc='Shell', createTime='2022-02-12 11:13:41', sourceServerType='null', targetServerType='null', runJarName='IdexShell.jar', killable=0, typeSort='数据计算', inCharge='admin', brokerParallelism=10, taskParallelism=10, doRedoParallelism=10000, downgradePriorityTries=2, retryWait=5, retryLimit=5, defaultAliveWait=720, pollingSeconds=5, paramList='<parameters><parameter><name>hdpClient</name><value>/usr/hdp/current/hadoop-client</value></parameter><parameter><name>hiveClient</name><value>/usr/hdp/current/hive-client</value></parameter></parameters>', taskTypeExts=null, fileType='null', selectFilePath=null, excludeCommonLib=false, postHooks=null}, dependenceFulfillTime='2023-03-24 16:20:00', firstDependenceFulfillTime='2023-03-24 16:20:00', firstStartTime='null', startTime='null', endTime='null', costTime='null', costMilliTime=null, maxCostTime=null, minCostTime=null, avgCostTime=null, lastLog='null', schedulerDateTime='null', lastSchedulerDateTime='2023-03-24 16:15:00', lastUpdate='2023-03-24 16:20:00', createTime='null', dependencyRel=and, ignoreEvent=false, virutalFlag=null, projectId='null', projectIdent='null', projectName='null', executionSpace='CYCLIC', instanceExtAttribute='null', list=null, productName=DATA_DEV, resourceGroup=20221221143954438902, resourceInstanceId=any, yarnQueue=null}}<br>2023-03-24 16:20:13.299 DEBUG n.AbstractTaskRunner.init [main] [line:390]- Find scheduler-loader-service scheduler-center-service in consul 9.164.88.149 8500<br>2023-03-24 16:20:13.305 INFO utils.FeignHttpUtils.getRunnerStartOpt [main] [line:103]- Server scheduler-loader-service ip is http://127.0.0.1:9066 <br>2023-03-24 16:20:15.154 DEBUG geConverterExtractor.extractData [main] [line:102]- Reading to [com.tencent.tbds.guldan.api.common.api.ResponseObject<java.lang.Boolean>]<br>2023-03-24 16:20:15.182 INFO n.AbstractTaskRunner.init [main] [line:407]- -- The runner 20230324161041651_2023-03-24 16:20:00_9 register to loader true<br>2023-03-24 16:20:15.277 DEBUG ils.yarn.net.RestApi.post [main] [line:75]- put from rest api server body {\"data\":\"20230324161041651_2023-03-24 16:20:00\",\"pageIndex\":0,\"pageSize\":10,\"count\":true,\"desc\":false} to path https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/startRunner contentType application/json<br>2023-03-24 16:20:15.281 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:87]- start post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/startRunner, method=POST, start date=1679646015281, timeout=10000<br>2023-03-24 16:20:15.563 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:119]- finish post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/startRunner, method=POST, start date=1679646015563<br>2023-03-24 16:20:15.567 INFO n.AbstractTaskRunner.init [main] [line:441]- -- The runner 20230324161041651_2023-03-24 16:20:00 register to scheduler true<br>2023-03-24 16:20:15.967 INFO scheduler.TaskRunner.execute [main] [line:99]- 第0步：准备工作目录<br>2023-03-24 16:20:15.974 INFO scheduler.TaskRunner.execute [main] [line:104]- Work Dir:/usr/local/taskScheduler_loader//tdcp/workspace/20230324161041651/20230324162000<br>2023-03-24 16:20:15.974 INFO n.AbstractTaskRunner.deleteDir [main] [line:1079]- delete dir true<br>2023-03-24 16:20:15.975 INFO scheduler.TaskRunner.execute [main] [line:111]- 第1步：获取安全凭证信息<br>2023-03-24 16:20:15.977 INFO n.AbstractTaskRunner.getAuthInfo [main] [line:3485]- request param com.tencent.wedata.security.bean.AccountMappingQueryParam@3ca14cf4[clusterId=emr-k3s4qsys,projectId=1460963739345731584,sourceAccount=100028590605,commandList=<null>,serverHost=<null>,ownerUserId=100028448903,userId=100028590605,tenantId=1315051789,jwtSecret=tbds@2022,requestId=<null>,region=<null>]<br>2023-03-24 16:20:16.035 INFO ty.client.AuthClient.createHeader [main] [line:416]- requestId: ef2ba654-4073-4d89-b84d-9a09ffc88e26<br>2023-03-24 16:20:16.286 DEBUG ol.RequestAddCookies.process [main] [line:123]- CookieSpec selected: default<br>2023-03-24 16:20:16.306 DEBUG col.RequestAuthCache.process [main] [line:77]- Auth cache not set in the context<br>2023-03-24 16:20:16.455 DEBUG entConnectionManager.requestConnection [main] [line:266]- Connection request: [route: {s}->https://wedata-api-fusion-test.cloud.tencent.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]<br>2023-03-24 16:20:16.483 DEBUG entConnectionManager.leaseConnection [main] [line:310]- Connection leased: [id: 0][route: {s}->https://wedata-api-fusion-test.cloud.tencent.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]<br>2023-03-24 16:20:16.487 DEBUG chain.MainClientExec.execute [main] [line:234]- Opening connection {s}->https://wedata-api-fusion-test.cloud.tencent.com:443<br>2023-03-24 16:20:16.491 DEBUG ntConnectionOperator.connect [main] [line:139]- Connecting to wedata-api-fusion-test.cloud.tencent.com/39.156.125.95:443<br>2023-03-24 16:20:16.491 DEBUG nectionSocketFactory.connectSocket [main] [line:366]- Connecting socket to wedata-api-fusion-test.cloud.tencent.com/39.156.125.95:443 with timeout 0<br>2023-03-24 16:20:16.498 DEBUG nectionSocketFactory.createLayeredSocket [main] [line:430]- Enabled protocols: [TLSv1.2]<br>2023-03-24 16:20:16.498 DEBUG nectionSocketFactory.createLayeredSocket [main] [line:431]- Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]<br>2023-03-24 16:20:16.498 DEBUG nectionSocketFactory.createLayeredSocket [main] [line:435]- Starting handshake<br>2023-03-24 16:20:16.524 DEBUG nectionSocketFactory.verifyHostname [main] [line:465]- Secure session established<br>2023-03-24 16:20:16.524 DEBUG nectionSocketFactory.verifyHostname [main] [line:466]-  negotiated protocol: TLSv1.2<br>2023-03-24 16:20:16.525 DEBUG nectionSocketFactory.verifyHostname [main] [line:467]-  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256<br>2023-03-24 16:20:16.525 DEBUG nectionSocketFactory.verifyHostname [main] [line:475]-  peer principal: CN=*.cloud.tencent.cn, O=Tencent Technology (Shenzhen) Company Limited, L=Shenzhen, ST=Guangdong, C=CN<br>2023-03-24 16:20:16.525 DEBUG nectionSocketFactory.verifyHostname [main] [line:484]-  peer alternative names: [*.cloud.tencent.cn, *.cloud.tencent.com, *.cloud.tencent.com.cn, cloud.tencent.com.cn, cloud.tencent.com, yun.tencent.cn, yun.tencent.com.cn, yun.tencent.com, *.qcloud.com, *.qcloud.qq.com, qcloud.qq.com, qcloud.com, cloud.tencent.cn]<br>2023-03-24 16:20:16.525 DEBUG nectionSocketFactory.verifyHostname [main] [line:488]-  issuer principal: CN=GlobalSign Organization Validation CA - SHA256 - G2, O=GlobalSign nv-sa, C=BE<br>2023-03-24 16:20:16.530 DEBUG ntConnectionOperator.connect [main] [line:146]- Connection established 172.16.0.92:49738<->39.156.125.95:443<br>2023-03-24 16:20:16.531 DEBUG chain.MainClientExec.execute [main] [line:255]- Executing request POST /safe/v1/queryAccountMapping HTTP/1.1<br>2023-03-24 16:20:16.531 DEBUG chain.MainClientExec.execute [main] [line:266]- Proxy auth state: UNCHALLENGED<br>2023-03-24 16:20:16.533 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:133]- http-outgoing-0 >> POST /safe/v1/queryAccountMapping HTTP/1.1<br>2023-03-24 16:20:16.533 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Content-type: application/json; charset=utf-8<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Connection: Close<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRfaWQiOiIxMzE1MDUxNzg5IiwidXNlcl9pZCI6IjEwMDAyODU5MDYwNSIsIm93bmVyX3VzZXJfaWQiOiIxMDAwMjg0NDg5MDMiLCJleHAiOjE2Nzk2NDk2MTZ9.r3Up_MGPFxXok8jz_fcOa-Od1Je8q55sohDyL-x666U<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> x-wedata-trace-id: ef2ba654-4073-4d89-b84d-9a09ffc88e26<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Content-Length: 93<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Content-Encoding: UTF-8<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Host: wedata-api-fusion-test.cloud.tencent.com<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> User-Agent: Apache-HttpClient/4.5.8 (Java/1.8.0_292)<br>2023-03-24 16:20:16.534 DEBUG HttpClientConnection.onRequestSubmitted [main] [line:136]- http-outgoing-0 >> Accept-Encoding: gzip,deflate<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"POST /safe/v1/queryAccountMapping HTTP/1.1[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Content-type: application/json; charset=utf-8[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Connection: Close[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0ZW5hbnRfaWQiOiIxMzE1MDUxNzg5IiwidXNlcl9pZCI6IjEwMDAyODU5MDYwNSIsIm93bmVyX3VzZXJfaWQiOiIxMDAwMjg0NDg5MDMiLCJleHAiOjE2Nzk2NDk2MTZ9.r3Up_MGPFxXok8jz_fcOa-Od1Je8q55sohDyL-x666U[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"x-wedata-trace-id: ef2ba654-4073-4d89-b84d-9a09ffc88e26[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Content-Length: 93[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Content-Encoding: UTF-8[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Host: wedata-api-fusion-test.cloud.tencent.com[\\r][\\n]\"<br>2023-03-24 16:20:16.535 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"User-Agent: Apache-HttpClient/4.5.8 (Java/1.8.0_292)[\\r][\\n]\"<br>2023-03-24 16:20:16.536 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"Accept-Encoding: gzip,deflate[\\r][\\n]\"<br>2023-03-24 16:20:16.536 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 >> \"[\\r][\\n]\"<br>2023-03-24 16:20:16.536 DEBUG .http.impl.conn.Wire.wire [main] [line:87]- http-outgoing-0 >> \"{\"clusterId\":\"emr-k3s4qsys\",\"projectId\":\"1460963739345731584\",\"sourceAccount\":\"100028590605\"}\"<br>2023-03-24 16:20:16.780 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"HTTP/1.1 200 [\\r][\\n]\"<br>2023-03-24 16:20:16.780 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"Date: Fri, 24 Mar 2023 08:20:16 GMT[\\r][\\n]\"<br>2023-03-24 16:20:16.780 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"Content-Type: application/json[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"Transfer-Encoding: chunked[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"Connection: close[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"Server: APISIX/2.11.0[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"x-wedata-trace-id: ef2ba654-4073-4d89-b84d-9a09ffc88e26[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"1ac[\\r][\\n]\"<br>2023-03-24 16:20:16.781 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"{\"Code\":\"OK\",\"Message\":\"SUCCESS\",\"Data\":{\"id\":276,\"clusterId\":\"emr-k3s4qsys\",\"authenticationType\":2,\"sourceAccount\":\"100028448903\",\"sourceAccountName\":\"Wedata[0xe5][0xbc][0x80][0xe5][0x8f][0x91][0xe6][0xb5][0x8b][0xe8][0xaf][0x95][0xe4][0xb8][0x93][0xe7][0x94][0xa8]\",\"projectId\":\"1460963739345731584\",\"targetAccount\":\"hadoop\",\"securityKey\":\"Guldan@2022\",\"fileName\":null,\"createUin\":\"100028636123\",\"operatorUin\":\"100028649389\",\"createTime\":\"2022-11-29T02:11:40.000+00:00\",\"updateTime\":\"2023-02-03T03:38:43.000+00:00\"}}[\\r][\\n]\"<br>2023-03-24 16:20:16.785 DEBUG HttpClientConnection.onResponseReceived [main] [line:122]- http-outgoing-0 << HTTP/1.1 200 <br>2023-03-24 16:20:16.786 DEBUG HttpClientConnection.onResponseReceived [main] [line:125]- http-outgoing-0 << Date: Fri, 24 Mar 2023 08:20:16 GMT<br>2023-03-24 16:20:16.786 DEBUG HttpClientConnection.onResponseReceived [main] [line:125]- http-outgoing-0 << Content-Type: application/json<br>2023-03-24 16:20:16.786 DEBUG HttpClientConnection.onResponseReceived [main] [line:125]- http-outgoing-0 << Transfer-Encoding: chunked<br>2023-03-24 16:20:16.786 DEBUG HttpClientConnection.onResponseReceived [main] [line:125]- http-outgoing-0 << Connection: close<br>2023-03-24 16:20:16.786 DEBUG HttpClientConnection.onResponseReceived [main] [line:125]- http-outgoing-0 << Server: APISIX/2.11.0<br>2023-03-24 16:20:16.786 DEBUG HttpClientConnection.onResponseReceived [main] [line:125]- http-outgoing-0 << x-wedata-trace-id: ef2ba654-4073-4d89-b84d-9a09ffc88e26<br>2023-03-24 16:20:16.803 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"0[\\r][\\n]\"<br>2023-03-24 16:20:16.803 DEBUG .http.impl.conn.Wire.wire [main] [line:73]- http-outgoing-0 << \"[\\r][\\n]\"<br>2023-03-24 16:20:16.804 DEBUG HttpClientConnection.close [main] [line:79]- http-outgoing-0: Close connection<br>2023-03-24 16:20:16.805 DEBUG ain.ConnectionHolder.releaseConnection [main] [line:104]- Connection discarded<br>2023-03-24 16:20:16.805 DEBUG entConnectionManager.releaseConnection [main] [line:349]- Connection released: [id: 0][route: {s}->https://wedata-api-fusion-test.cloud.tencent.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]<br>2023-03-24 16:20:16.806 DEBUG ain.ConnectionHolder.cancel [main] [line:145]- Cancelling request execution<br>2023-03-24 16:20:16.831 INFO ty.client.AuthClient.getAccountMappingVo [main] [line:221]- -- 获取安全信息成功!  100028448903(hadoop)<br>2023-03-24 16:20:16.833 INFO scheduler.TaskRunner.execute [main] [line:118]- Linux User:hadoop<br>2023-03-24 16:20:16.833 INFO scheduler.TaskRunner.execute [main] [line:120]- 第2步：校验 Shell 文件<br>2023-03-24 16:20:16.834 INFO scheduler.TaskRunner.execute [main] [line:127]- 第3步：替换 Shell 文件中的参数<br>2023-03-24 16:20:16.844 INFO scheduler.TaskRunner.execute [main] [line:133]- 替换后的 Shell 文件内容如下<br>#!/bin/bash<br>#******************************************************************#<br>##author: stackxchen<br>##create time: 2023-03-24 16:09:14<br>#******************************************************************#<br>echo myevent=\"test_event,202303241610\"<br>2023-03-24 16:20:16.844 INFO scheduler.TaskRunner.execute [main] [line:151]- Final Shell File:/usr/local/taskScheduler_loader//tdcp/workspace/20230324161041651/20230324162000/test_event_minute_20230324161041651_20230324161625186.sh<br>2023-03-24 16:20:16.845 INFO scheduler.TaskRunner.execute [main] [line:154]- 第4步：预处理 Shell 文件<br>2023-03-24 16:20:16.867 INFO n.AbstractTaskRunner.exeSimpleLinuxCommand [main] [line:3425]- cmd dos2unix /usr/local/taskScheduler_loader//tdcp/workspace/20230324161041651/20230324162000/*.sh execute success!<br>2023-03-24 16:20:16.869 INFO n.AbstractTaskRunner.exeSimpleLinuxCommand [main] [line:3425]- cmd chmod 777 -R /usr/local/taskScheduler_loader//tdcp/workspace/20230324161041651 execute success!<br>2023-03-24 16:20:16.869 INFO scheduler.TaskRunner.execute [main] [line:158]- 第5步：准备 Shell 执行环境<br>2023-03-24 16:20:16.883 INFO n.AbstractTaskRunner.exeSimpleLinuxCommand [main] [line:3425]- cmd sudo /usr/sbin/useradd hadoop execute success!<br>2023-03-24 16:20:16.883 INFO scheduler.TaskRunner.execute [main] [line:179]- Shell Command:/usr/local/taskScheduler_loader//script/2.sh /usr/local/taskScheduler_loader//tdcp/workspace/20230324161041651/20230324162000/test_event_minute_20230324161041651_20230324161625186.sh<br>2023-03-24 16:20:16.883 INFO scheduler.TaskRunner.execute [main] [line:181]- 第6步：获取定义的事件变量<br>2023-03-24 16:20:16.884 DEBUG .net.ConnectionUtils.sendGetOrDelete [main] [line:58]- start get or delete connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/publishers/1460963739345731584/20230324161041651, method=GET, start date=1679646016884, timeout=10000<br>2023-03-24 16:20:16.973 DEBUG .net.ConnectionUtils.sendGetOrDelete [main] [line:77]- finish get or delete connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/publishers/1460963739345731584/20230324161041651, method=GET, start date=1679646016973<br>2023-03-24 16:20:16.974 INFO mon.utils.EventUtils.getEventHook [main] [line:203]- response body mapper. {\"key\":\"20230324161041651\",\"type\":\"REST_API\",\"creationTs\":\"2023-03-24T08:16:21.953Z\",\"properties\":\"{\\\"eventVariable\\\":\\\"myevent\\\"}\",\"description\":\"\"}<br>2023-03-24 16:20:16.978 INFO scheduler.TaskRunner.postEventHookVariable [main] [line:323]- -- event hook configured, properties: {\"eventVariable\":\"myevent\"}<br>2023-03-24 16:20:16.980 INFO scheduler.TaskRunner.postEventHookVariable [main] [line:334]- -- event variable: myevent<br>2023-03-24 16:20:16.980 INFO scheduler.TaskRunner.execute [main] [line:184]- Event Variable:myevent<br>2023-03-24 16:20:16.980 INFO scheduler.TaskRunner.execute [main] [line:200]- 第7步：启动 Shell 脚本<br>2023-03-24 16:20:16.986 INFO n.AbstractTaskRunner.getTimeOut [main] [line:1009]- getDefault getTimeOut -1 <br>2023-03-24 16:20:16.987 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key cur_run_date value 20230324162000<br>2023-03-24 16:20:16.987 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key task_id value 20230324161041651<br>2023-03-24 16:20:16.987 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key hdfsAuthId value 5TUVpBd***jxDa2iC<br>2023-03-24 16:20:16.987 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key hdfsAuthUserName value hdfs<br>2023-03-24 16:20:16.987 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key task_cycleType value I<br>2023-03-24 16:20:16.988 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key PWD value /data/wedata/taskScheduler_loader/log/tasklog/35/20230324161041651<br>2023-03-24 16:20:16.988 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key hdfsAuthKey value P5x6PCkcR3J00PBpZt1AnEU5QNqREN15mfTw<br>2023-03-24 16:20:16.988 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key LANG value zh_CN.UTF-8<br>2023-03-24 16:20:16.988 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key hadoop_job_ugi value hadoop<br>2023-03-24 16:20:16.988 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key SHLVL value 1<br>2023-03-24 16:20:16.988 INFO .utils.CmdRunProcess.startProcess [main] [line:152]- -- env key _ value /usr/jdk64/jdk1.8.0_191/bin/java<br>2023-03-24 16:20:17.000 INFO .CmdOutputReadThread.run [Thread-6] [line:81]- eventHookVariable myevent events test_event,202303241610<br>2023-03-24 16:20:17.000 INFO .CmdOutputReadThread.run [Thread-6] [line:86]- -- myevent=test_event,202303241610<br>2023-03-24 16:20:17.995 INFO .utils.CmdRunProcess.waitAndDestroyProcess [main] [line:207]- resultPath /data/wedata/taskScheduler_loader/log/tasklog/35/20230324161041651/20230324162000_result.log  result {\"results\":{\"data\":\"myevent\\u003dtest_event,202303241610\\n\"}}<br>2023-03-24 16:20:17.996 INFO scheduler.TaskRunner.execute [main] [line:209]- Shell Process Finished With ExitCode 0<br>2023-03-24 16:20:17.996 INFO scheduler.TaskRunner.execute [main] [line:226]- Shell运行成功!<br>2023-03-24 16:20:17.996 INFO scheduler.TaskRunner.execute [main] [line:228]- 第8步：解析事件变量<br>2023-03-24 16:20:17.996 INFO scheduler.TaskRunner.execute [main] [line:230]- 事件变量 myevent=test_event,202303241610<br>2023-03-24 16:20:17.996 INFO scheduler.TaskRunner.execute [main] [line:232]- 第9步：开始触发事件<br>2023-03-24 16:20:18.007 INFO mon.utils.EventUtils.lambda$triggerEvents$1 [main] [line:152]- 正在触发事件 test_event 202303241610<br>2023-03-24 16:20:18.008 DEBUG ils.yarn.net.RestApi.post [main] [line:75]- put from rest api server body {\"name\":\"test_event\",\"dimension\":\"202303241610\",\"description\":\"runner triggered time series event\"} to path https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/cases/1460963739345731584/trigger contentType application/json<br>2023-03-24 16:20:18.008 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:87]- start post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/cases/1460963739345731584/trigger, method=POST, start date=1679646018008, timeout=10000<br>2023-03-24 16:20:18.101 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:119]- finish post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/cases/1460963739345731584/trigger, method=POST, start date=1679646018101<br>2023-03-24 16:20:18.101 INFO mon.utils.EventUtils.triggerEvent [main] [line:68]- triggerEvent projectId 1460963739345731584 eventCase com.tencent.tbds.guldan.api.store.service.api.pojo.dto.EventCaseDTO@3a0896b3 response {\"caseId\":\"9e2a0e1f870ec340018712b44a160008\",\"name\":\"test_event\",\"dimension\":\"202303241610\",\"creationTs\":\"2023-03-24T08:20:18.069Z\",\"consumerId\":null,\"description\":\"runner triggered time series event\"}<br>2023-03-24 16:20:18.101 DEBUG mon.utils.EventUtils.lambda$triggerEvents$1 [main] [line:154]- event [name: test_event, dimension: 202303241610] triggered successfully<br>2023-03-24 16:20:18.102 DEBUG .net.ConnectionUtils.sendGetOrDelete [main] [line:58]- start get or delete connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/1460963739345731584/test_event/lookup, method=GET, start date=1679646018102, timeout=10000<br>2023-03-24 16:20:18.209 DEBUG .net.ConnectionUtils.sendGetOrDelete [main] [line:77]- finish get or delete connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskStore/v1/events/1460963739345731584/test_event/lookup, method=GET, start date=1679646018209<br>2023-03-24 16:20:18.223 DEBUG mon.utils.EventUtils.lambda$null$0 [main] [line:176]- notify event listener. 20230324160914089, 2023-03-24 16:10:00<br>2023-03-24 16:20:18.226 DEBUG ils.yarn.net.RestApi.post [main] [line:75]- put from rest api server body {\"data\":[{\"taskId\":\"20230324160914089\",\"datatimeDimension\":\"2023-03-24 16:10:00\",\"tenantId\":\"1315051789\"}],\"pageIndex\":0,\"pageSize\":10,\"count\":true,\"desc\":false} to path https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/submitStatemachineEvent contentType application/json<br>2023-03-24 16:20:18.226 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:87]- start post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/submitStatemachineEvent, method=POST, start date=1679646018226, timeout=10000<br>2023-03-24 16:20:18.278 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:119]- finish post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/submitStatemachineEvent, method=POST, start date=1679646018278<br>2023-03-24 16:20:18.279 INFO mon.utils.EventUtils.submitStatemachineEvent [main] [line:98]- submitStatemachineEvent response {\"pageIndex\":0,\"pageSize\":0,\"sum\":0,\"code\":\"success\",\"message\":null,\"data\":true}<br>2023-03-24 16:20:18.279 INFO scheduler.TaskRunner.execute [main] [line:261]- 任务运行完成 bye~<br>2023-03-24 16:20:18.279 INFO n.AbstractTaskRunner.startWork [main] [line:332]- -- task running finish<br>2023-03-24 16:20:18.280 INFO n.AbstractTaskRunner.startPostHooks [main] [line:647]- startPostHooks, force=false<br>2023-03-24 16:20:18.280 INFO n.AbstractTaskRunner.startPostHooks [main] [line:674]- postHooks is null<br>2023-03-24 16:20:18.295 DEBUG geConverterExtractor.extractData [main] [line:102]- Reading to [com.tencent.tbds.guldan.api.common.api.ResponseObject<java.util.List<java.lang.String>>]<br>2023-03-24 16:20:18.302 DEBUG geConverterExtractor.extractData [main] [line:102]- Reading to [com.tencent.tbds.guldan.api.common.api.ResponseObject<java.lang.Boolean>]<br>2023-03-24 16:20:18.303 DEBUG n.AbstractTaskRunner.done [main] [line:573]- notify loader true<br>2023-03-24 16:20:18.305 DEBUG ils.yarn.net.RestApi.post [main] [line:75]- put from rest api server body {\"data\":{\"instanceKey\":\"20230324161041651_2023-03-24 16:20:00\",\"state\":\"COMPLETED\",\"lastLog\":\"\"},\"pageIndex\":0,\"pageSize\":10,\"count\":true,\"desc\":false} to path https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/commitRunnerState contentType application/json<br>2023-03-24 16:20:18.305 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:87]- start post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/commitRunnerState, method=POST, start date=1679646018305, timeout=10000<br>2023-03-24 16:20:18.365 DEBUG .net.ConnectionUtils.sendPostOrPut [main] [line:119]- finish post or put connection of url=https://wedata-api-fusion-test.cloud.tencent.com/tdw/taskScheduler/commitRunnerState, method=POST, start date=1679646018365<br>2023-03-24 16:20:18.367 DEBUG n.AbstractTaskRunner.done [main] [line:619]- notify scheduler true<br>2023-03-24 16:20:18.367 INFO n.AbstractTaskRunner.done [main] [line:639]- Exe done ...<br>",
            "ThirdTaskLogUrlDesc": null,
            "ThirdTaskRunLogInfo": null,
            "YarnLogInfo": null
        },
        "RequestId": "43cd2268-3295-454c-a229-f5249432a83b"
    }
}
```

